{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["\nimport axios from \"axios\"\n\nexport let page = 0;\nexport const perPage = 15;\nlet privInputValue = '';\n\nexport async function getImages(input) {\n    const API_KEY = '48149972-37b948820d674e189867b2eae'\n    const BASE_URL = 'https://pixabay.com/api/'\n\n    // axios.defaults.headers.common[\"key\"] = API_KEY;\n\n    // axios.defaults.baseURL = 'https://pixabay.com/api/';\n\n    // if (input === '') {\n    //     return\n    // }\n\n    if (page < 1) {\n        privInputValue = input\n        page += 1;\n    } else if (page > 0 && (input !== privInputValue)) {\n        page = 1;\n        privInputValue = input;\n    } else {\n        page +=1\n    }\n\n    return await axios.get(`${BASE_URL}`, {\n        params: {\n            key: API_KEY,\n            q: input,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: true,\n            per_page: perPage,\n            page: page\n        }\n    })\n\n}","export function galleryMarkup(arr) {\n    return arr.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `<li class=\"cat-card\">\n        <div class=\"gallery\"><a href=\"${largeImageURL}\"><img src=\"${webformatURL}\" alt=\"${tags}\"></a></div>\n        <ul class=\"cat-info\">\n            <li class=\"info-desk\">\n            <h1>Likes</h1>\n            <p>${likes}</p>\n            </li> \n            <li class=\"info-desk\">\n            <h1>Views</h1>\n            <p>${views}</p>\n            </li>\n            <li class=\"info-desk\">\n            <h1>Comments</h1>\n            <p>${comments}</p>\n            </li>\n            <li class=\"info-desk\">\n            <h1>Downloads</h1>\n            <p>${downloads}</p>\n            </li>\n        </ul>\n        </li>`).join('')\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { getImages, perPage, page } from \"./js/pixabay-api\";\n// import * as getImgRequest from \"./js/pixabay-api\"\nimport { galleryMarkup } from \"./js/render-functions\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst refs = {\n    form: document.querySelector(\".js-form\"),\n    gallery: document.querySelector('.js-gallery'),\n    loader: document.querySelector('.js-submit-loader'),\n    loadMore: document.querySelector('.js-load-more'),\n    loader2: document.querySelector('.js-more-loader'),\n}\n\nrefs.form.addEventListener('submit', onSubmit);\nrefs.loadMore.addEventListener('click', onLoadMore);\n\n\nlet inputRequest = ''\nlet totalHitsPages = 0;\n\n\nasync function onSubmit(evt) {\n    try {\n        evt.preventDefault()\n        refs.gallery.innerHTML = '';\n        \n        const inp = evt.currentTarget.elements.input.value.trim()\n        inputRequest = inp;\n\n        this.reset()\n        \n        refs.loadMore.classList.add('hidden')\n        refs.loader.classList.remove('hidden')\n        \n        //–ó–∞–ø–∏—Ç –Ω–∞ API –∑ —ñ–º–ø–æ—Ä—Ç–æ–≤–∞–Ω–æ—ó —Ñ—É–Ω–∫—Ü—ñ—ó\n        const getImgs = await getImages(inp);\n        \n        //–†–æ–∑–º—ñ—Ç–∫–∞ –∑ –ø–µ—Ä–µ–≤—ñ—Ä–∫–æ—é —á–∏ –ø—Ä–∏–π—â–ª–æ —â–æ—Å—å –≤–∑–∞–≥–∞–ª—ñ —ñ —á–∏ –∫–∞—Ä—Ç–∏–Ω–æ–∫ –±—ñ–ª—å—à–µ 15-—Ç–∏ (—á–∏ —Å—Ç–∞–≤–∏—Ç–∏ –∫–Ω–æ–ø–∫—É Load More)\n        markupImages(getImgs);\n        function markupImages({data}) {\n                // console.log(data);\n                if (data.total < 1) {\n                    iziToast.show({\n                        message: 'üö´ Sorry, there are no images matching your search query. Please try again!',\n                        position: \"topRight\",\n                        timeout: 3000,\n                        backgroundColor: 'red',\n                        messageColor: 'white',\n                        progressBar: false,\n                    });\n                    \n                } else {\n                    if (data.totalHits > 15) {\n                        totalHitsPages = data.totalHits;\n                        //–î–æ–¥–∞—î–º–æ –∫–Ω–æ–ø–∫—É Load More, —è–∫—â–æ –∫–∞—Ä—Ç–∏–Ω–æ–∫ –≤ –±–∞–∑—ñ –±—ñ–ª—å—à–µ 15\n                        refs.loadMore.classList.remove('hidden')\n                    }\n                    \n                    return refs.gallery.insertAdjacentHTML('beforeend', galleryMarkup(data.hits))\n                }\n        }\n        //–û–Ω–æ–≤–ª–µ–Ω–Ω—è SimpleLightBox\n        await gallerySLB.refresh();\n        \n    } catch (err) {   \n        console.log(err)\n    } finally {\n            //–ü—Ä–∏–±–∏—Ä–∞—î–º–æ loader - –∫–æ–ª–æ —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è\n        refs.loader.classList.add('hidden'); \n        }\n}\n\n\nasync function onLoadMore() {\n  \n    try {\n        refs.loadMore.classList.add('hidden')\n        refs.loader2.classList.remove('hidden')\n\n        //–í–∏–∑–Ω–∞—á–∞—î–º–æ –∑–∞–≥–∞–ª—å–Ω—É –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Å—Ç–æ—Ä—ñ–Ω–æ–∫, –¥–æ—Å—Ç—É–ø–Ω–∏—Ö –¥–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è\n        const totalPages = Math.ceil(totalHitsPages / perPage);\n\n    \n        if ((totalPages < page) || (totalPages === page)) {\n            iziToast.show({\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: \"topRight\",\n                timeout: 3000,\n                backgroundColor: 'blue',\n                messageColor: 'white',\n                progressBar: false,\n            });\n            refs.loader2.classList.add('hidden');\n        } else {\n            const newImage = await getImages(inputRequest)\n            refs.gallery.insertAdjacentHTML('beforeend', galleryMarkup(newImage.data.hits))\n            gallerySLB.refresh();\n\n            refs.loader2.classList.add('hidden');\n            refs.loadMore.classList.remove('hidden')\n\n            //–ü—Ä–æ–∫—Ä—É—Ç–∫–∞ –µ–∫—Ä–∞–Ω—É –Ω–∞ –≤–∏—Å–æ—Ç—É –¥–≤–æ—Ö –∫–∞—Ä—Ç–æ–∫ –ø—ñ—Å–ª—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–æ–≤–∏—Ö –∫–∞—Ä—Ç–∏–Ω–æ–∫ –≤ –≥–∞–ª–µ—Ä–µ—é\n            const imgCard = document.querySelector('.cat-card');\n            const yScroll = imgCard.getBoundingClientRect().height * 2.75\n            window.scrollBy({\n                top: yScroll,\n                left: 0,\n                behavior: \"smooth\",\n            })\n        }\n    \n    } catch (err) {\n        console.log(err);\n    }\n}\n\nlet gallerySLB = new SimpleLightbox('.gallery a', { captionsData: 'alt', captionDelay: 250, history: false })\n\n\n\n//–ß–û–ú–£ –ü–Ü–°–õ–Ø –ü–ï–†–ï–ó–ê–í–ê–ù–¢–ê–ñ–ï–ù–ù–Ø –°–¢–û–†–Ü–ù–ö–ò –ó–ê–ü–ò–¢–ò –î–£–ë–õ–Æ–Æ–¢–¨–°–Ø –Ü –î–†–£–ì–ò–ú –Ü–î–ï –ü–£–°–¢–ò–ô, –ë–ï–ó –£–õ–Æ–ß–û–í–û–ì–û –°–õ–û–í–ê?\n// –¶–ï –Ø–ö–û–°–¨ –ü–û–í'–Ø–ó–ê–ù–û –ó RESET() –£ 33 –†–Ø–î–ö–£ –¢–ê –¢–ò–ú –î–ï –Ø –î–ê–Æ –ù–û–í–ï –ó–ù–ê–ß–ï–ù–ù–Ø inputRequest\n// –£ 30 - –ë–ê–ì, –£ 34 - –í–°–ï –î–û–ë–†–ï.\n\n"],"names":["page","perPage","privInputValue","getImages","input","API_KEY","BASE_URL","axios","galleryMarkup","arr","webformatURL","largeImageURL","tags","likes","views","comments","downloads","refs","onSubmit","onLoadMore","inputRequest","totalHitsPages","evt","markupImages","data","iziToast","inp","getImgs","gallerySLB","err","totalPages","newImage","yScroll","SimpleLightbox"],"mappings":"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"}